<!DOCTYPE html>
<html>
	<head>
	<script src='https://docs.opencv.org/3.4.0/opencv.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    </head>
	<body>
        <button id="download">Download me</button>
        <!-- The `multiple` attribute lets users select multiple files. -->
        <!-- <input type="file" id="file-selector" multiple> -->
        <BR>
        <input type="file" id="file-selector">
        <script>

            const fileSelector = document.getElementById('file-selector');
            fileSelector.addEventListener('change', (event) => {
                const fileList = event.target.files;
                console.log(fileList);
                function printFile(file) {
                    var reader = new FileReader();
                    reader.onload = function(evt) {
                        console.log(evt.target.result);
                    };
                    reader.readAsText(file);
                }
                printFile(fileList[0])
            });

            // function download() {
            //                 var fileContents=JSON.stringify(jsonObject, null, 2);
            //                 var fileName= "data.json";

            //                 var pp = document.createElement('a');
            //                 pp.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(fileContents));
            //                 pp.setAttribute('download', fileName);
            //                 pp.click();
            //             }
            //             setTimeout(function() {download()}, 500);

            $('#download').on("click", function() {
                function download() {
                    var jsonObject = {
                    "name": "John",
                    "age": 31,
                    "city": "New York"
                    };
                    var fileContents = JSON.stringify(jsonObject, null, 2);
                    var fileName = "data.json";

                    var pp = document.createElement('a');
                    pp.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(fileContents));
                    pp.setAttribute('download', fileName);
                    pp.click();
                }
                setTimeout(function() {
                    download()
                }, 500);
                });
                function readText(file) {
                    const reader = new FileReader();
                    reader.addEventListener('load', (event) => {
                    img.src = event.target.result;
                    });
                    reader.readAsText(file);
                }
        </script>
    </body>
</html>
